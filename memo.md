# 位置情報養成講座
## 5-2-1
## 5-2-2
- maplibreにはレイヤコントロールの機能はデフォルトで付いているわけではない
- なので、サードパーティプラグインを利用する
- OpacityControllというクラスを利用して、切り替えたいレイヤの辞書を作成してコントロールを作成する
- これの初期化は地図画面の初期ロードが完了した後にする必要があるので、onloadしたタイミングで初期化する
## 5-2-3
- 避難所の位置表示する
- CSVの形式で11万件ほどある
- 緯度経度と施設名などの属性が含まれている
- こういったCSVもベクトルデータとして扱われる
- 避難所の種別後に表示を切り替える
  - 指定緊急避難場所データは8種類の災害への対応状況を保持している
## 5-2-4
- クリックイベントを追加する
- 指定緊急避難所データにはいくつか属性が付いている
- ポイントをクリックしたらイベントが発生するようにしたい
- これの実装にはmap.on()メソッドを利用する必要がある
- クリックした地点に存在する地物はmap.queryRndererdFeatures()メソッドを利用することで取得できる
- 今回は指定緊急避難場所データの地物にクリックイベントを実装したい
- ここで実装するクリックイベントは読み込み済みデータを用いるため、処理の記述する順番には注意する必要がある
- これに対処するためにクリックイベントの登録はloadイベント終了時に(要するに初期ロード完了後に行うことにする)
- イベント発生時に実行される関数の引数eにマウスのカーソルの位置が含まれている
- featuresにはマウスカーソルの下にある地物のデータがgeojsonの形式で格納されている
  - 地物が見つからない場合は空の配列となる
  - 今回の実装では地物が見つからない場合には処理を終了することにする

- いい感じになってきた
- もっと見やすくするためにポイントがクリック可能であることを示したい
- クリック可能な場合、カーソルアイコンを変更する
